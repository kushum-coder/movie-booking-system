{% extends "layout.twig" %}

{% block title %}
    {{ genre.id is defined ? 'Edit Genre' : 'Add Genre' }}
{% endblock %}

{% block content %}
<div class="card">
    <h2>{{ genre.id is defined ? 'Edit Genre' : 'Add Genre' }}</h2>

    {% if errors is defined %}
        {% for error in errors %}
            <p class="error">{{ error }}</p>
        {% endfor %}
    {% endif %}

    <form method="post" autocomplete="off">
        <!-- CSRF TOKEN (FIXES ERROR) -->
        <input type="hidden" name="csrf" value="{{ csrf }}">

        <label>Genre Name</label>
        <input
            type="text"
            name="name"
            value="{{ genre.name|default('') }}"
            pattern="[A-Za-z ]{2,50}"
            title="Only letters and spaces (min 2 characters)"
            required
        >

        <button type="submit">
            {{ genre.id is defined ? 'Update' : 'Add' }}
        </button>

        <a href="./public/genres/index.php" style="margin-left:10px;">Cancel</a>
    </form>
</div>
{% endblock %}
