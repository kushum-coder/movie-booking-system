{% extends "layout.twig" %}

{% block content %}
<div class="card">
<h2>{{ heading }}</h2>

<form method="post" autocomplete="off">

<input type="hidden" name="csrf" value="{{ csrf }}">

<label>Title</label>
<input
    type="text"
    name="title"
    value="{{ movie.title|default('') }}"
    placeholder="Movie title"
    pattern="[A-Za-z0-9 ]{2,100}"
    title="2–100 characters. Letters, numbers and spaces only."
    required
>

<label>Genre</label>
<select name="genre_id" required>
    <option value="">Select genre</option>
    {% for genre in genres %}
        <option value="{{ genre.id }}"
            {% if movie.genre_id == genre.id %}selected{% endif %}
        >
            {{ genre.name }}
        </option>
    {% endfor %}
</select>

<label>Cast</label>
<select name="cast_id" required>
    <option value="">Select cast</option>
    {% for cast in casts %}
        <option value="{{ cast.id }}"
            {% if movie.cast_id == cast.id %}selected{% endif %}
        >
            {{ cast.name }}
        </option>
    {% endfor %}
</select>

<label>Release Year</label>
<input
    type="text"
    name="release_year"
    value="{{ movie.release_year|default('') }}"
    placeholder="e.g. 1999 or 2025"
    pattern="^\d{4}$"
    title="Enter a valid 4-digit year"
    required
>

<label>Rating (0–10)</label>
<input
    type="number"
    name="rating"
    step="0.1"
    min="0"
    max="10"
    placeholder="Optional"
    value="{{ movie.rating|default('') }}"
>

<button type="submit">{{ button }}</button>

</form>
</div>
{% endblock %}
